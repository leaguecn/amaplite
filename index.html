<!--AhkgsWH-oZMhs7IGU-e2-dXChk6Qrda-r2d19wH13C8RZjtempyQSce3hsY4rtuU-->
<!DOCTYPE html>
<html>
<head>
    <title>Bing Map lite</title>
    <meta charset="utf-8" />
    <script type='text/javascript'>
        var map, searchManager;
    function GetMap() {
        map = new Microsoft.Maps.Map('#myMap', {});
        Microsoft.Maps.loadModule(['Microsoft.Maps.AutoSuggest', 'Microsoft.Maps.Search'], function () {
            var manager = new Microsoft.Maps.AutosuggestManager({ map: map });
            manager.attachAutosuggest('#searchBox', '#searchBoxContainer', suggestionSelected);
            searchManager = new Microsoft.Maps.Search.SearchManager(map);
        });
        //Load the directions module.
        Microsoft.Maps.loadModule('Microsoft.Maps.Directions', function () {
            //Create an instance of the directions manager.
            directionsManager = new Microsoft.Maps.Directions.DirectionsManager(map);

            //Specify where to display the route instructions.
            directionsManager.setRenderOptions({ itineraryContainer: '#directionsItinerary' });

            //Specify the where to display the input panel
            directionsManager.showInputPanel('directionsPanel');
        });     
        
        //Load the traffic layer
		Microsoft.Maps.loadModule('Microsoft.Maps.Traffic', function () {
		    var manager = new Microsoft.Maps.Traffic.TrafficManager(map);
		    manager.show();
		});
        
    }
    function suggestionSelected(result) {
        //Remove previously results from the map.
        map.entities.clear();
        //Show the suggestion as a pushpin and center map over it.
        var pin = new Microsoft.Maps.Pushpin(result.location);
        map.entities.push(pin);
        map.setView({ bounds: result.bestView });
        document.getElementById('output').innerHTML = 'Selection:<br/>' + result.name;
    }
    function geocode() {
        //Remove previously results from the map.
        map.entities.clear();
        //Get the users query and geocode it.
        var query = document.getElementById('searchBox').value;
        var searchRequest = {
            where: query,
            callback: function (r) {
                if (r && r.results && r.results.length > 0) {
                    var pin, pins = [], locs = [], output = 'Results:<br/>';
                    //Add a pushpin for each result to the map and create a list to display.
                    for (var i = 0; i 
